<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>打开和关闭文件</title>
<link href="css/style.css" rel="stylesheet"/>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a>打开和关闭文件</h1><p>当系统处于文本模式(整个屏幕都用于文本，没有图像)和系统处于 GUI 模式(屏幕包含窗口、图像和菜单)时，都可以使用 vi。当它处于 GUI 模式(通常是 KDE 或 Gnome)时，vi 在终端窗口中运行。终端窗口是一个纯文本窗口，通常可以通过单击计算机屏幕的图标(小图像)打开。</p><p>(在 Red Hat Linux 中，可以通过点击屏幕左下角的 Red Hat 图标打开终端窗口，打开 System Tools 菜单，然后从菜单中选择 terminal。如果终端窗口的图标还没有在屏幕底部的启动面板中，那么可以方便地将终端窗口的图标添加到启动面板中。</p><p>至少有两种方法可以使用 vi 同时创建和打开新文件。一种是在命令行输入 vi，如下所示：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">vi</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 34px;"></div><div class="CodeMirror-gutters" style="display: none; height: 34px;"></div></div></div></pre><p>这会创建一个空文件，在将其内容保存到磁盘之前不会有名称（即，将您输入的文本传输到硬盘，软盘等以进行长期存储）。</p><p>您会注意到在键入此命令后会打开（大部分）空白窗口。不要担心尝试在屏幕上输入任何文本（尽管你可能会想要）。本主题将在下一章中介绍。</p><p>(您最初可能会看到与上面描述的几乎空无一物的屏幕不同的东西。原因很可能是您的计算机正在使用 vi 的克隆而不是真正的东西。这没问题，因为 vi 的核心命令也在克隆中使用。如果您的系统中安装了最流行的克隆版本 Vim，那么最初的屏幕中间会有一些文本，这些文本以“Vim - Vi改良”之类的开头。</p><p>打开新文件的第二种方法是键入 vi，后跟要创建的文件的名称，例如：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">vi apple</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 34px;"></div><div class="CodeMirror-gutters" style="display: none; height: 34px;"></div></div></div></pre><p>这将在当前目录（当前在全文屏幕或终端窗口中打开的目录或文件夹）中创建一个名为 “apple” 的新文件。</p><p>如果需要，您可以创建相同的文件，并在文件名末尾添加“.txt”等扩展名。 在Linux中，这仅仅是方便（或习惯）的问题，并且它通常对文件没有实际区别，因为在任何一种情况下它都是纯文本文件。 例如：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">vi apple.txt</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 34px;"></div><div class="CodeMirror-gutters" style="display: none; height: 34px;"></div></div></div></pre><p>也可以在当前目录以外的目录中创建新文件。例如，要在目录 /home/jane/ 中创建并打开名为“apple”的文件，请键入：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">vi /home/jane/apple</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 34px;"></div><div class="CodeMirror-gutters" style="display: none; height: 34px;"></div></div></div></pre><p>（正如您在研究 Linux 或 Unix 时可能已经知道的那样，无论您的当前目录在系统中的哪个位置都可以执行上述示例，因为该命令的路径以根目录开头，即 /home。此示例假定 您具有在 /jane 目录中创建文件的适当权限。）</p><p>打开现有文件的技术是相同的。只需键入 vi 后跟文件名。例如，要在目录 /usr/local/ 中打开名为 “pear” 的现有文件，请键入：</p><pre spellcheck="false" class="md-fences md-end-block contain-cm modeLoaded" lang="text"><div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">vi /usr/local/pear</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 34px;"></div><div class="CodeMirror-gutters" style="display: none; height: 34px;"></div></div></div></pre><p>当您打开现有文件或新文件时，您会注意到几乎整个屏幕都专门用于文件文本或可用于输入文本。唯一的例外是底线，它提供有关文件的信息。此信息最初包括行数和文件中的字符数。输入命令时，将使用底线来显示此类命令的条目。</p><p>您还会注意到屏幕左上角有一个闪烁的黑色矩形。这是光标，它的作用是告诉你文件当前准备采取什么字符或位置。</p><p>向下拉伸屏幕的左边缘是一列波浪（〜）。这些仅仅是行标记，不是文本的一部分。当您的打字向下延伸到屏幕时，它们将消失。</p><p>要关闭没有进行任何更改的文件，请单击 ESC (位于键盘左上角的 ESC 键)，然后键入 :q (冒号后面跟着小写字母 “q”)，最后按回车。(此处使用术语 “hit” 而不是 “press” 来强调不必按住 ESC 键，只需按一下即可。)</p><p>要关闭已进行更改的文件（例如已添加或删除的文本）而不保存更改，请按 ESC 键，键入 :q! 然后按 ENTER 键。 这有时被称为“强制退出”。</p><p>vi 使用缓冲区( RAM 芯片中的一块内存)。打开现有文件时，vi 将该文件从硬盘(或软盘、光盘等)复制到缓冲区。您对文件所做的所有更改最初仅对缓冲区中的副本进行更改，并且仅在“保存”更改时对文件本身进行更改。“保存”文件意味着写(例如，将缓冲区的内容传输到硬盘(或软盘)。</p><p>同样，当您打开一个新文件。您输入的所有文本（以及您对其进行的后续编辑）仅存在于缓冲区中，直到您将文件保存到磁盘。</p><p>要保存对文件所做的更改，请按ESC，输入:qw，然后按回车键。“w”代表“写”。保存文件并同时退出的另一种方法(也许更简单)是点击 ESC，然后输入 ZZ (连续两个大写的 Z)。</p><p>在创建一个新的文本文件并关闭它之后，您可能想要确认没有出错，并且文件确实存在。最简单的方法可能是使用标准的 Unix ls 命令，它显示当前目录中所有文件的列表。</p><p>下一章: <a href='enter.html'>输入文本</a></p></div>
</body>
</html>
