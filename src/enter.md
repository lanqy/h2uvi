# 输入文本

vi 有两种基本的操作模式:命令模式和文本插入模式。对于初学者来说，如何在它们之间来回切换可能是 vi 最令人困惑的事情。但它实际上非常简单，一旦你习惯了它，你可能会发现它非常高效。

命令模式是打开文件(现有或新文件)时的默认模式。(这与大多数文本处理程序和文字处理程序相反，因此看起来可能与直觉相反。)因为每个文件最初都是在命令模式下打开的，所以您不能立即开始键入文本。也就是说，在键盘上键入的所有内容都被 vi 解释为命令。

在命令模式下可以对文件执行的许多类型命令的示例包括（1）切换到文本插入模式，（2）在文件周围移动光标，（3）删除字符或行，（4）转换字符，（6）改变大小写，（6）将文件内容附加到另一个（关闭）文件，（7）设置 vi 选项，（8）将文件保存到磁盘（9）关闭文件并退出 vi。

另一种模式，文本插入模式，也被简单地称为“插入模式”或“输入模式”。它用于将文本输入缓冲区内存(并同时输入到屏幕上)。在这种模式下，键盘上键入的所有内容都添加到文本中，而不成为命令(尽管您可以使用 vi 克隆在文本模式下执行一些命令操作)。

从命令模式切换到输入模式的最常用方法是使用 i（代表“插入”或“输入”）命令。只需在命令模式下键入字母 i 即可完成此操作。现在您已准备好开始输入文本。

与文字处理器甚至大多数文字编辑器不同，传统版本的 vi 中没有自动换行（尽管你会在一些克隆中注意到它）。按 ENTER 键启动新行。

当您完成文本输入或想要执行某些其他操作（例如移动到文本中的其他位置或删除其中一些操作）时，请按 ESC 键以返回命令模式。

要确定 vi 的当前模式并不容易。但这并不是真正的问题，因为如果有疑问，只需按 ESC，您就会知道您处于命令模式(这将使您处于命令模式，如果您还没有处于该模式)。

键入一些文本后，可以使用四个基本命令在文本周围移动光标。 使用这些命令可以转到任何所需位置以修改文本，包括进行插入和删除。 四个基本光标定位命令是：

- h 将光标向左移动一个字符
- j 将光标向下移动一行
- k 将光​​标向上移动一行
- l 将光标向右移动一个字符

这些命令中的每一个都可以单独使用，也可以通过在其前面键入一个整数来修改，以指示要移动的字符或行数。例如，输入（当然是在命令模式下）

```text
3j
```

将光标向下移动三行。或者输入 2h 会将它向左移动两个字符。

按住键可以重复这些命令。如果您尝试不可能的移动，例如当光标位于顶行时按k，屏幕可能会闪烁或发出哔哔声（取决于您的计算机的设置方式）。

通过使用前面带有行号的 G 命令，可以将光标直接移动到任何所需的行。例如，输入

```text
5G
```

将光标移动到文本顶部的第五行。只需输入没有任何数字的G就可以将光标移动到最后一行文本。

当您使用 i 命令从命令模式切换到输入模式然后开始键入文本时，您键入的每个字符都将放置在光标所覆盖的字符的左侧。 这会导致光标所覆盖的角色以及右侧的所有内容都向右移动。

有时您会想要在光标下的字符右侧放置一个字符。 当光标位于一行中的最后一个字符并且您想要追加该行时，这尤其有用。 要做到这一点，只需使用 a（小写“a”，代表“append”）命令而不是i命令从命令模式切换到插入模式。

保存使用 vi 创建或修改的文件后，您可能需要验证其内容是否真正符合您的预期。 一种方法是使用 cat，Unix 连接实用程序。 （不，这与名称具有相同拼写的流行驯养动物没有关系）。 例如，键入：

```text
cat /home/john/fruit/lemon
```

这导致 /home/john/fruit/ 目录中文件 “lemon” 的内容以只读形式显示在屏幕上。

当然，如果您当前的目录已经是 /home/john/fruit/，那么您只需键入：

```text
cat lemon
```

下一章：[编辑文本](edit.html)
